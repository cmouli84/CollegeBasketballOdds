<html ng-app="App">
<head>
  <meta charset="utf-8">
  <title>College Basket Ball Odds</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://bootswatch.com/cosmo/bootstrap.min.css" />
  <script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js"></script>
  <script type="text/javascript">
    var App = angular.module('App', []);

    App.controller('NbacbCtrl', function($scope, $http, $filter) {
      $http.get('/api/nbacb')
           .then(function(res){
              $scope.picks = res.data;                
            });
      
      $scope.eventDates = [];
      
      for (var i=0; i<7; i++) {
          var eventDate = new Date();
          eventDate.setDate(eventDate.getDate() - 3 + i);
    	  $scope.eventDates.push({
    		  date: eventDate,
    		  selected: (i === 3)
    	  });
   	  }
      
      $scope.getWestGatePointSpread = function(westGatePointSpread) {
    	  return (westGatePointSpread === -999999) ? "Not Available" : westGatePointSpread;
      }
      
      $scope.getGameScore = function(pick) {
    	  return (pick.homeScore === -999999) ? "Not Started" : pick.homeScore + "-" + pick.awayScore;
      }
      
      $scope.loadMatchesByDate = function(event) {
          $http.get('/api/nbacb/' + $filter('date')(event.date, "yyyy-MM-dd"))
          .then(function(res){
             $scope.picks = res.data;
             
             angular.forEach($scope.eventDates, function(value, key) {
            	  value.selected = (value.date == event.date);
            	});
           });
      }
      
    });

  </script>
<style type="text/css">
.wrapper {
    position:relative;
    margin:0 auto;
    overflow:hidden;
	padding:5px;
  	height:50px;
}

.list {
    position:absolute;
    left:0px;
    top:0px;
  	min-width:3000px;
  	margin-left:12px;
    margin-top:0px;
}

.list li{
	display:table-cell;
    position:relative;
    text-align:center;
    cursor:grab;
    cursor:-webkit-grab;
    color:#efefef;
    vertical-align:middle;
}

.scroller {
  text-align:center;
  cursor:pointer;
  display:none;
  padding:7px;
  padding-top:11px;
  white-space:no-wrap;
  vertical-align:middle;
  background-color:#fff;
}

.scroller-right{
  float:right;
}

.scroller-left {
  float:left;
}
  </style>
</head>
<body>
  <div ng-controller="NbacbCtrl">  
    <div class="container">
      <div class="scroller scroller-left"><i class="glyphicon glyphicon-chevron-left"></i></div>
      <div class="scroller scroller-right"><i class="glyphicon glyphicon-chevron-right"></i></div>
      <div class="wrapper">
        <ul class="nav nav-tabs list" id="myTab" >
          <li ng-class="{'active' : event.selected}" ng-repeat="event in eventDates"><a href="#" ng-click="loadMatchesByDate(event)">{{event.date | date:'MM/dd/yyyy'}}</a></li>
      </ul>
      </div>
    </div>
    <div class="container">
      <table class="table table-striped col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <thead>
          <tr>
            <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Match</th>
            <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Home Team<br>Wins-Loses</th>
            <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Away Team<br>Wins-Loses</th>
            <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Westgate Odds</th>
            <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Sonny Moore Odds</th>
            <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Score<br />Home-Away</th>
          </tr>
        </thead>
        <tr ng-repeat="pick in picks">
          <td class="col-lg-2 col-md-2 col-sm-2 col-xs-2"><div class="small">{{pick.gameDate}}</div><strong>{{pick.awayTeamName}}<br>@{{pick.homeTeamName}}</strong></td>
          <td class="col-lg-2 col-md-2 col-sm-2 col-xs-2" style="vertical-align:middle">{{pick.homeWins}}-{{pick.homeLoses}}</td>
          <td class="col-lg-2 col-md-2 col-sm-2 col-xs-2" style="vertical-align:middle">{{pick.awayWins}}-{{pick.awayLoses}}</td>
          <td class="col-lg-2 col-md-2 col-sm-2 col-xs-2" style="vertical-align:middle">{{getWestGatePointSpread(pick.westgateCurrentPointSpread)}}</td>
          <td class="col-lg-2 col-md-2 col-sm-2 col-xs-2" style="vertical-align:middle">{{pick.sonnyMoorePointSpread}}</td>
          <td class="col-lg-2 col-md-2 col-sm-2 col-xs-2" style="vertical-align:middle">{{getGameScore(pick)}}</td>
        </tr>
      </table>
    </div> 
  </div>
  <script type="text/javascript">
    var hidWidth;
    var scrollBarWidths = 40;

    var widthOfList = function(){
      var itemsWidth = 0;
      $('.list li').each(function(){
        var itemWidth = $(this).outerWidth();
        itemsWidth+=itemWidth;
      });
      return itemsWidth;
    };

    var widthOfHidden = function(){
      return -$('.wrapper').outerWidth();
      //return (($('.wrapper').outerWidth())-widthOfList()-getLeftPosi())-scrollBarWidths;
    };

    var getLeftPosi = function(){
      return $('.list').position().left;
    };

    var reAdjust = function(){
      if (($('.wrapper').outerWidth()) < widthOfList()) {
        $('.scroller-right').show();
      }
      else {
        $('.scroller-right').hide();
      }
    
      if (getLeftPosi()<0) {
        $('.scroller-left').show();
      }
      else {
        $('.item').animate({left:"-="+getLeftPosi()+"px"},'slow');
    	  $('.scroller-left').hide();
      }
    }

    reAdjust();

    $(window).on('resize',function(e){  
      	reAdjust();
    });

    $('.scroller-right').click(function() {
    
      $('.scroller-left').fadeIn('slow');
      $('.scroller-right').fadeOut('slow');
    
      $('.list').animate({left:"+="+widthOfHidden()+"px"},'slow',function(){

      });
    });

    $('.scroller-left').click(function() {
    
      $('.scroller-right').fadeIn('slow');
      $('.scroller-left').fadeOut('slow');
    
      $('.list').animate({left:"-="+getLeftPosi()+"px"},'slow',function(){
    	
      });
    });        
  </script>
</body>
</html>